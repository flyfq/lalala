"use strict";require(["../scripts/config.js"],function(){require(["jquery","cookie","jqcookie"],function(c,t,i){c.ajax({url:"http://localhost:10002/data/products.json",success:function(t){for(var i=t,s=JSON.parse(c.cookie("_goods")),n="",e=0;e<s.length;e++)for(var a=0;a<i.length;a++)s[e].$id==i[a].productId&&(n+='<div class="infro-list clear" index = "'+i[a].productId+'">\n\t\t\t\t\t\t\t\t\t\t\t<div class="" style="width: 190px;">\n\t\t\t\t\t\t\t\t\t\t\t\t<input type="checkbox" name="" id="" value="" checked="checked" />\n\t\t\t\t\t\t\t\t\t\t\t\t<img src="'+i[a].smallImage+'" >\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t<div class="" style="width: 300px;"><a href="#">'+i[a].productName+'</a></div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="" style="width: 120px;">\n\t\t\t\t\t\t\t\t\t\t\t\t<span>'+i[a].vipshopPrice+"</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<p>(税费：¥"+(.2*i[a].vipshopPrice).toFixed(2)+')</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="" style="width: 80px;">\n\t\t\t\t\t\t\t\t\t\t\t\t<a class="minus" href="#">-</a><input type="text" name="" id="" value="'+s[e].num+'" /><a class="add" href="#">+</a>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="" style="width: 160px;">'+i[a].vipshopPrice*s[e].num+'</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="te" style="width: 120px;"><a class="te" href="##">删除</a></div>\n\t\t\t\t\t\t\t\t\t\t\t</div>');c(".goodsinfro").append(n);var o=0;c.each(s,function(t,n){c.each(i,function(t,i){n.$id==i.productId&&(o+=i.vipshopPrice*n.num)})}),c("#total").text("¥"+o),c("#tax").text("¥"+.2*o),c("#totalAll").text("¥"+o+.2*o),c(".goodsinfro").on("click","a.te",function(){for(var t=c(this).parent().parent().attr("index"),i=0;i<s.length;i++)s[i].$id==t&&(c(this).parent().parent().remove(),s.splice(i,1));c.cookie("_goods",JSON.stringify(s))}),c(".goodsinfro").on("click","a.minus",function(){var n=parseInt(c(this).siblings("input")[0].value);1==n?n=1:n--,c(this).siblings("input")[0].value=n;var e=c(this).parent().parent().attr("index");c.each(s,function(t,i){i.$id==e&&(i.num=n),c.cookie("_goods",JSON.stringify(s))})}),c(".goodsinfro").on("click","a.add",function(){var n=parseInt(c(this).siblings("input")[0].value);n++,c(this).siblings("input")[0].value=n;var e=c(this).parent().parent().attr("index");c.each(s,function(t,i){i.$id==e&&(i.num=n),c.cookie("_goods",JSON.stringify(s))})})}})})});